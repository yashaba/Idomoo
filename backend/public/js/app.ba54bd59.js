(function(){"use strict";var e={4263:function(e,t,o){var a=o(5130),r=o(6768),n=o(4232),i=o.p+"img/loader.d7ea7e0f.svg";const s=e=>((0,r.Qi)("data-v-5ec1e0c2"),e=e(),(0,r.jt)(),e),l={key:0,class:"main-container"},d={class:"title"},u={class:"storyboard-info"},c={class:"styled-container"},m={key:0,class:"preview"},f=s((()=>(0,r.Lk)("h2",null,"Preview",-1))),p=["src"],y={key:1,class:"preview"},b=s((()=>(0,r.Lk)("h2",null,"Video Preview",-1))),v={style:{"text-align":"center","min-height":"300px","min-width":"420px"}},g={key:1},h=s((()=>(0,r.Lk)("img",{class:"spinner",src:i},null,-1))),k=[h],L={key:1};function F(e,t,o,a,i,s){const h=(0,r.g2)("IdomooForm"),F=(0,r.g2)("VideoPlayer"),w=(0,r.g2)("Toast");return(0,r.uX)(),(0,r.CE)("div",null,[e.storyboard?((0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("div",d,[(0,r.Lk)("h1",null,(0,n.v_)(e.storyboard.name)+" "+(0,n.v_)(e.storyboard.storyboard_id),1)]),(0,r.Lk)("div",null,[(0,r.Lk)("div",u,[(0,r.bF)(h,{onFormPosted:e.generateVideo,isLoading:e.isLoading,storyboard:e.storyboard},null,8,["onFormPosted","isLoading","storyboard"]),(0,r.Lk)("div",c,[e.url?((0,r.uX)(),(0,r.CE)("div",y,[b,(0,r.Lk)("div",v,[e.isLoading?((0,r.uX)(),(0,r.CE)("div",g,k)):((0,r.uX)(),(0,r.Wv)(F,{key:0,url:e.url},null,8,["url"])),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.generateLandingPage&&e.generateLandingPage(...t)),class:"styled-button"},"Generate Landing Page")])])):((0,r.uX)(),(0,r.CE)("div",m,[f,(0,r.Lk)("img",{src:e.storyboard.thumbnail,alt:"",srcset:""},null,8,p)]))])])])])):((0,r.uX)(),(0,r.CE)("div",L,"Loading Story Board")),(0,r.bF)(w)])}o(4603),o(7566),o(8721);var w=o(4373);const E=w.A.create({baseURL:"https://idomoo.onrender.com",headers:{"Content-Type":"application/json"}}),_=e=>E.get(`/storyboards/${e}`),V=e=>E.post("/storyboards/generate-video",e),C=e=>E.post("/generate-landing-page",e,{responseType:"blob"}),N=async e=>{const t=20,o=1e3;for(let r=0;r<t;r++)try{const t=await w.A.get(e),a=t.data.status;if("VIDEO_AVAILABLE"===a)return!0;if("ERROR"===a||"NOT_EXIST"===a)return!1;await new Promise((e=>setTimeout(e,o)))}catch(a){throw console.error(`Error fetching video status: ${a}`),new Error("Failed to retrieve video status")}return!1},A=e=>((0,r.Qi)("data-v-a6223306"),e=e(),(0,r.jt)(),e),P={class:"form-container styled-container"},O=A((()=>(0,r.Lk)("h2",null,"Enter the details below in order to generate your video",-1))),I={class:"flex"},T=A((()=>(0,r.Lk)("label",{for:"firstName"},"First Name",-1))),X=A((()=>(0,r.Lk)("label",{for:"lastName"},"Last Name",-1))),j={key:0,class:"form-group"},S=["for"],U={class:"media-container"},$={key:1,class:"form-group"},x=["for"],R=["id","onUpdate:modelValue"],D=["disabled"],M={key:0},B={key:1,class:"spinner",src:i};function z(e,t,o,i,s,l){const d=(0,r.g2)("InputText"),u=(0,r.g2)("FloatLabel"),c=(0,r.g2)("ColorPicker"),m=(0,r.g2)("FileUpload"),f=(0,r.g2)("Toast");return(0,r.uX)(),(0,r.CE)("div",P,[(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,a.D$)(((...t)=>e.submitForm&&e.submitForm(...t)),["prevent"])),class:"styled-form"},[O,(0,r.Lk)("div",I,[(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,{id:"firstName",modelValue:e.form.firstName,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.firstName=t)},null,8,["modelValue"]),T])),_:1}),(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(d,{id:"lastName",modelValue:e.form.lastName,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.lastName=t)},null,8,["modelValue"]),X])),_:1})]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.storyboard.data,((t,o)=>((0,r.uX)(),(0,r.CE)("div",{key:o},[t.key.includes("Media")?((0,r.uX)(),(0,r.CE)("div",j,[(0,r.Lk)("label",{for:`data-${o}`,class:"styled-label"},(0,n.v_)(t.key)+":",9,S),(0,r.Lk)("div",U,[(0,r.bF)(c,{modelValue:t.val,"onUpdate:modelValue":e=>t.val=e,format:"rgb"},null,8,["modelValue","onUpdate:modelValue"]),(0,r.bF)(m,{ref_for:!0,ref:"fileupload",mode:"basic",name:"demo[]",accept:"image/*",auto:"false",maxFileSize:1e6,onSelect:t=>e.onUpload(t,o)},null,8,["onSelect"])])])):((0,r.uX)(),(0,r.CE)("div",$,[(0,r.Lk)("label",{for:`data-${o}`,class:"styled-label"},(0,n.v_)(t.key)+":",9,x),(0,r.bo)((0,r.Lk)("input",{type:"text",id:`data-${o}`,"onUpdate:modelValue":e=>t.val=e,class:"styled-input"},null,8,R),[[a.Jo,t.val]])]))])))),128)),(0,r.Lk)("button",{disabled:e.isValid,type:"submit",class:"styled-button"},[e.isLoading?((0,r.uX)(),(0,r.CE)("img",B)):((0,r.uX)(),(0,r.CE)("span",M,"Generate Video"))],8,D)],32),(0,r.bF)(f)])}var G=o(4511),Q=o(1973),J=o(7214),K=o(1114);class W{constructor(){(0,K.A)(this,"clientId","1ba9a58305fcdf8")}async uploadFile(e){return new Promise(((t,o)=>{const a=e.files[0],r=new FileReader;r.onloadend=async()=>{const e=r?.result,a=e.split(",")[1];try{const e=await w.A.post("https://api.imgur.com/3/image",{image:a,type:"base64"},{headers:{Authorization:`Client-ID ${this.clientId}`}});t(e.data.data.link)}catch(n){console.error("Error uploading image:",n),o(n)}},r.onerror=e=>o(e),r.readAsDataURL(a)}))}}const q=new W;var H=o(6338),Y=o(4127),Z=(0,r.pM)({name:"IdomooForm",components:{ColorPicker:G.A,FileUpload:Q.A,Toast:J.A,InputText:H.A,FloatLabel:Y.A},props:{storyboard:Object,isLoading:Boolean},data(){return{url:"",form:{firstName:"",lastName:""}}},computed:{isValid(){return!this.form.firstName||!this.form.lastName}},methods:{convertRgbToString(e){return`rgb(${e.r}, ${e.g}, ${e.b})`},async onUpload(e,t){try{const o=await q.uploadFile(e);o&&(this.storyboard.data[t].val=o)}catch(o){this.$toast.add({severity:"error",summary:"Error while uploading file",detail:o.response.data.data.error||"",life:3e3})}},submitForm(){this.form.lastName&&this.form.firstName&&this.storyboard&&this.storyboard.data&&(this.storyboard.data.forEach((e=>{"object"===typeof e.val&&void 0!==e.val.r&&(e.val=this.convertRgbToString(e.val))})),this.$emit("formPosted",{...this.form,...this.storyboard.data}))}}}),ee=o(1241);const te=(0,ee.A)(Z,[["render",z],["__scopeId","data-v-a6223306"]]);var oe=te;const ae={id:"idm-player"};function re(e,t,o,a,n,i){return(0,r.uX)(),(0,r.CE)("div",ae)}var ne=(0,r.pM)({name:"VideoPlayer",props:{url:String},mounted(){const e={interactive:!0,size:"hd",src:this.url,autoplay:!1,mute:!0};idmPlayerCreate(e,"idm-player")}});const ie=(0,ee.A)(ne,[["render",re],["__scopeId","data-v-654940c0"]]);var se=ie,le=(0,r.pM)({components:{IdomooForm:oe,VideoPlayer:se,Toast:J.A},data(){return{storyboard:null,storyboardId:5111457,url:"",formData:{lastName:"",firstName:""},isLoading:!1}},created(){const e=this.storyboardId;_(e).then((e=>{this.storyboard=e.data})).catch((e=>{console.error("Failed to fetch storyboard:",e),this.$toast.add({severity:"error",summary:"Failed to fetch storyboard",detail:"",life:3e3})}))},methods:{async generateVideo(e){this.isLoading=!0,this.formData=e;const t=await V(this.storyboard);console.log("ðŸš€ ~ generateVideo ~ videoRes:",t);const o=await N(t.data.check_status_url);console.log("ðŸš€ ~ generateVideo ~ isReady:",o),o&&(this.url=t.data.output.video[0].links.url),this.isLoading=!1},generateLandingPage(){const e={lastName:this.formData.lastName,firstName:this.formData.firstName,url:this.url};C(e).then((e=>{const t=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o)})).catch((e=>{console.error("Error generating landing page:",e),this.$toast.add({severity:"error",summary:"Error generating landing page",detail:"",life:3e3})}))}}});const de=(0,ee.A)(le,[["render",F],["__scopeId","data-v-5ec1e0c2"]]);var ue=de,ce=o(8253),me=o(8928),fe=o(9890);(0,a.Ef)(ue).use(ce.Ay,{theme:{preset:fe.A}}).use(me.A).mount("#app")}},t={};function o(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,a,r,n){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],r=e[u][1],n=e[u][2];for(var s=!0,l=0;l<a.length;l++)(!1&n||i>=n)&&Object.keys(o.O).every((function(e){return o.O[e](a[l])}))?a.splice(l--,1):(s=!1,n<i&&(i=n));if(s){e.splice(u--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[a,r,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,a){var r,n,i=a[0],s=a[1],l=a[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(l)var u=l(o)}for(t&&t(a);d<i.length;d++)n=i[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(u)},a=self["webpackChunkmy_vue_ts_app"]=self["webpackChunkmy_vue_ts_app"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(4263)}));a=o.O(a)})();
//# sourceMappingURL=app.ba54bd59.js.map